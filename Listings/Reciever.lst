C51 COMPILER V9.54   RECIEVER                                                              10/09/2015 15:36:43 PAGE 1   


C51 COMPILER V9.54, COMPILATION OF MODULE RECIEVER
OBJECT MODULE PLACED IN .\Objects\Reciever.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE Reciever.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\Listings\
                    -Reciever.lst) TABS(2) OBJECT(.\Objects\Reciever.obj)

line level    source

   1          #include "at89c5131.h"
   2          #include "stdio.h"
   3          #define LED P1
   4          
   5          int HiBy,LoBy,a,b;
   6          bit change_delay;
   7          ///
   8          ///~
   9          sbit Out = P0^0;
  10          
  11          ///
  12          
  13          
  14          ///~
  15          
  16          
  17          
  18          void Timer_Init()
  19          {
  20   1        // Set Timer0 to work in up counting 16 bit mode. Counts upto 
  21   1        // 65536 depending upon the calues of TH0 and TL0
  22   1        // The timer counts 65536 processor cycles. A processor cycle is 
  23   1        // 12 clocks. FOr 24 MHz, it takes 65536/2 uS to overflow
  24   1        // By setting TH0TL0 to 3CB0H, the timer overflows every 25 ms
  25   1        EA=1;
  26   1        TH0 = 0x3C;                     //For 25ms operation
  27   1        TL0 = 0xB0;
  28   1        TMOD = (TMOD & 0xF0) | 0x01;    // Set T/C0 Mode 
  29   1        ET0 = 1;                        // Enable Timer 0 Interrupts 
  30   1        TR0 = 1;                        // Start Timer 0 Running 
  31   1        //count =0;
  32   1      }
  33          
  34          
  35          void Serial_Init ()
  36          {
  37   1        SCON = 0x50;
  38   1        TMOD = (TMOD & 0x0F) | 0x20;
  39   1        ES = 1;
  40   1        TH1 = 243;
  41   1        TR1 = 1;
  42   1      }
  43          
  44          void Time_period (float frequency)
  45          {
  46   1        int counts = 1000000/frequency;
  47   1        int two_cmpl;
  48   1        ///
  49   1        
  50   1        ///~
  51   1        two_cmpl=65536-counts;
  52   1        HiBy = two_cmpl/256;
  53   1        LoBy=two_cmpl%256;
  54   1      }
C51 COMPILER V9.54   RECIEVER                                                              10/09/2015 15:36:43 PAGE 2   

  55          
  56          void Timer0_ISR (void) interrupt 1
  57          { ///
  58   1        
  59   1        ///~
  60   1        TH0 = HiBy;                     //For 25ms operation
  61   1        TL0 = LoBy; 
  62   1        if(b!=0x0f){
  63   2        Out=~Out;
  64   2        ///
  65   2            
  66   2          
  67   2        ///~
  68   2        
  69   2        }
  70   1      }
  71          
  72          void Serial_ISR (void) interrupt 4
  73          {
  74   1        if(SBUF<=0x0B)
  75   1          {a = SBUF;}
  76   1        else{b = SBUF;}
  77   1        RI = 0;
  78   1        change_delay=1;
  79   1        LED = 16*SBUF;
  80   1      }
  81          
  82          
  83          void main(void)
  84          {
  85   1        ///
  86   1        ///~
  87   1        Timer_Init();
  88   1        Serial_Init();
  89   1        while(1){
  90   2          if (change_delay==1){
  91   3          if(b==0x0c){
  92   4            if(a==0x00){Time_period(130.81);}
  93   4            if(a==0x01){Time_period(138.59);}
  94   4            if(a==0x02){Time_period(146.83);}
  95   4            if(a==0x03){Time_period(155.56);}
  96   4            if(a==0x04){Time_period(164.81);}
  97   4            if(a==0x05){Time_period(174.61);}
  98   4            if(a==0x06){Time_period(185.00);}
  99   4            if(a==0x07){Time_period(196.00);}
 100   4            if(a==0x08){Time_period(207.65);}
 101   4            if(a==0x09){Time_period(220.00);}
 102   4            if(a==0x0A){Time_period(233.08);}
 103   4            if(a==0x0B){Time_period(246.94);}
 104   4            }
 105   3          if(b==0x0d){
 106   4            if(a==0x00){Time_period(261.63);}
 107   4            if(a==0x01){Time_period(277.18);}
 108   4            if(a==0x02){Time_period(293.66);}
 109   4            if(a==0x03){Time_period(311.13);}
 110   4            if(a==0x04){Time_period(329.63);}
 111   4            if(a==0x05){Time_period(349.23);}
 112   4            if(a==0x06){Time_period(369.99);}
 113   4            if(a==0x07){Time_period(392.00);}
 114   4            if(a==0x08){Time_period(415.30);}
 115   4            if(a==0x09){Time_period(440.00);}
 116   4            if(a==0x0A){Time_period(466.16);}
C51 COMPILER V9.54   RECIEVER                                                              10/09/2015 15:36:43 PAGE 3   

 117   4            if(a==0x0B){Time_period(493.88);}
 118   4            }
 119   3          if(b==0x0e){
 120   4            if(a==0x00){Time_period(523.25);}
 121   4            if(a==0x01){Time_period(554.37);}
 122   4            if(a==0x02){Time_period(587.33);}
 123   4            if(a==0x03){Time_period(622.25);}
 124   4            if(a==0x04){Time_period(659.25);}
 125   4            if(a==0x05){Time_period(698.46);}
 126   4            if(a==0x06){Time_period(739.99);}
 127   4            if(a==0x07){Time_period(783.99);}
 128   4            if(a==0x08){Time_period(830.61);}
 129   4            if(a==0x09){Time_period(880.00);}
 130   4            if(a==0x0A){Time_period(932.33);}
 131   4            if(a==0x0B){Time_period(987.77);}
 132   4            }
 133   3          change_delay=0;
 134   3          }
 135   2          
 136   2      
 137   2          
 138   2        }
 139   1      }
 140          
 141          /*if(b==0x0e){
 142                if(a==0x00){Time_period(1046.50);}
 143                if(a==0x01){Time_period(1108.73);}
 144                if(a==0x02){Time_period(1174.66);}
 145                if(a==0x03){Time_period(1244.51);}
 146                if(a==0x04){Time_period(1318.51);}
 147                if(a==0x05){Time_period(1396.91);}
 148                if(a==0x06){Time_period(1479.98);}
 149                if(a==0x07){Time_period(1567.98);}
 150                if(a==0x08){Time_period(1661.22);}
 151                if(a==0x09){Time_period(1760.00);}
 152                if(a==0x0A){Time_period(1864.66);}
 153                if(a==0x0B){Time_period(1975.53);}
 154                }*/


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    874    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      8    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =      1    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
